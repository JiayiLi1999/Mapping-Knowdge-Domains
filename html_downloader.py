# -*- coding: utf-8 -*-# 得到网页内容import urllib.requestclass HtmlDownloader(object):    def __init__(self):        self.count = 0    def download(self, url, code='utf-8'):        if url is None:            return        headers = {'Accept': '*/*',                   'Accept-Language': 'en-US,en;q=0.8',                   'Cache-Control': 'max-age=0',                   'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.116 Safari/537.36',                   'Connection': 'keep-alive',                   'Referer': 'http://www.baidu.com/'                   }        req = urllib.request.Request(url, None, headers=headers)        response = None        try:            # 超时则会报错            response = urllib.request.urlopen(req, timeout=5)        except:            self.count += 1            if self.count > 5:                print("连续五次超时中断")                return -1            return -2        else:            self.count = 0        if response == None or response.getcode() != 200:            return None        return response.read().decode('utf-8')